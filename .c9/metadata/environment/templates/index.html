{"filter":false,"title":"index.html","tooltip":"/templates/index.html","undoManager":{"mark":6,"position":6,"stack":[[{"start":{"row":0,"column":0},"end":{"row":102,"column":7},"action":"remove","lines":["<!DOCTYPE html>","<html>","<head>","    <title>Lista de Arquivos Processados</title>","    <style>","        body { font-family: Arial, sans-serif; margin: 20px; }","        table { width: 100%; border-collapse: collapse; }","        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }","        th { background-color: #f2f2f2; }","        thumbnail { max-width: 100px; max-height: 100px; }","    </style>","    <!-- Load AWS SDK first -->","    <script src=\"https://sdk.amazonaws.com/js/aws-sdk-2.939.0.min.js\"></script>","</head>","<body>","    <h1>Arquivos Processados</h1>","    <table id=\"filesTable\">","        <thead>","            <tr>","                <th>ID</th>","                <th>Nome</th>","                <th>Tipo</th>","                <th>Status</th>","                <th>Miniatura</th>","                <th>Ações</th>","            </tr>","        </thead>","        <tbody></tbody>","    </table>","","    <script>","        // Configurações AWS (substitua pelas suas)","        const AWS_CONFIG = {","            region: \"us-east-1\",","            identityPoolId: \"us-east-1:XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\", // Opcional: se usar Cognito","            bucketName: \"meu-projeto-uploads-12345\"","        };","","        // Initialize AWS SDK","        AWS.config.update({ region: AWS_CONFIG.region });","        ","        // Função para listar arquivos do DynamoDB","        async function listFiles() {","            try {","                const dynamodb = new AWS.DynamoDB.DocumentClient();","                const params = {","                    TableName: \"FileMetadata\"","                };","                const data = await dynamodb.scan(params).promise();","                renderFiles(data.Items);","            } catch (error) {","                console.error(\"Erro ao buscar arquivos:\", error);","                alert(\"Falha ao carregar arquivos. Verifique o console.\");","            }","        }","","        // Renderiza os arquivos na tabela","        function renderFiles(files) {","            const tbody = document.querySelector(\"#filesTable tbody\");","            tbody.innerHTML = \"\";","","            files.forEach(file => {","                const row = document.createElement(\"tr\");","                ","                // Gera URL assinada para o arquivo (válida por 15 minutos)","                const fileUrl = generateSignedUrl(file.s3Key);","                let thumbnailUrl = \"\";","                if (file.result?.thumbnailKey) {","                    thumbnailUrl = generateSignedUrl(file.result.thumbnailKey);","                }","","                row.innerHTML = `","                    <td>${file.fileId}</td>","                    <td>${file.fileName}</td>","                    <td>${file.fileType}</td>","                    <td>${file.status}</td>","                    <td>","                        ${thumbnailUrl ? `<img src=\"${thumbnailUrl}\" class=\"thumbnail\">` : \"N/A\"}","                    </td>","                    <td>","                        <a href=\"${fileUrl}\" target=\"_blank\">Download</a>","                    </td>","                `;","                tbody.appendChild(row);","            });","        }","","        // Gera URL pré-assinada para acesso temporário","        function generateSignedUrl(key) {","            const s3 = new AWS.S3();","            const params = {","                Bucket: AWS_CONFIG.bucketName,","                Key: key,","                Expires: 900 // 15 minutos","            };","            return s3.getSignedUrl(\"getObject\", params);","        }","","        // Carrega os dados quando a página abre","        document.addEventListener(\"DOMContentLoaded\", listFiles);","    </script>","</body>","</html>"],"id":5},{"start":{"row":0,"column":0},"end":{"row":16,"column":0},"action":"insert","lines":["<!DOCTYPE html>","<html lang=\"en\">","<head>","    <meta charset=\"UTF-8\">","    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">","    <title>Listar Arquivos do S3</title>","</head>","<body>","    <h1>Arquivos no S3</h1>","    <ul>","        {% for file in files %}","            <li>{{ file }}</li>","        {% endfor %}","    </ul>","</body>","</html>",""]}],[{"start":{"row":0,"column":0},"end":{"row":16,"column":0},"action":"remove","lines":["<!DOCTYPE html>","<html lang=\"en\">","<head>","    <meta charset=\"UTF-8\">","    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">","    <title>Listar Arquivos do S3</title>","</head>","<body>","    <h1>Arquivos no S3</h1>","    <ul>","        {% for file in files %}","            <li>{{ file }}</li>","        {% endfor %}","    </ul>","</body>","</html>",""],"id":6},{"start":{"row":0,"column":0},"end":{"row":19,"column":0},"action":"insert","lines":["<!DOCTYPE html>","<html>","<head>","    <title>Imagens do S3</title>","</head>","<body>","    <h1>Galeria de Imagens</h1>","    {% if files %}","        {% for file in files %}","            <div>","                <img src=\"https://{{ 'meu-site-galeria-imagens' }}.s3.amazonaws.com/{{ file }}\" width=\"300px\">","                <p>{{ file }}</p>","            </div>","        {% endfor %}","    {% else %}","        <p>Nenhuma imagem encontrada.</p>","    {% endif %}","</body>","</html>",""]}],[{"start":{"row":0,"column":0},"end":{"row":19,"column":0},"action":"remove","lines":["<!DOCTYPE html>","<html>","<head>","    <title>Imagens do S3</title>","</head>","<body>","    <h1>Galeria de Imagens</h1>","    {% if files %}","        {% for file in files %}","            <div>","                <img src=\"https://{{ 'meu-site-galeria-imagens' }}.s3.amazonaws.com/{{ file }}\" width=\"300px\">","                <p>{{ file }}</p>","            </div>","        {% endfor %}","    {% else %}","        <p>Nenhuma imagem encontrada.</p>","    {% endif %}","</body>","</html>",""],"id":7},{"start":{"row":0,"column":0},"end":{"row":20,"column":0},"action":"insert","lines":["<!DOCTYPE html>","<html lang=\"pt-br\">","<head>","    <meta charset=\"UTF-8\">","    <title>Galeria de Imagens</title>","    <style>","        img {","            width: 300px;","            margin: 10px;","            border-radius: 8px;","        }","    </style>","</head>","<body>","    <h1>Minha Galeria</h1>","    {% for imagem in imagens %}","        <img src=\"{{ imagem }}\" alt=\"Imagem da galeria\">","    {% endfor %}","</body>","</html>",""]}],[{"start":{"row":0,"column":0},"end":{"row":20,"column":0},"action":"remove","lines":["<!DOCTYPE html>","<html lang=\"pt-br\">","<head>","    <meta charset=\"UTF-8\">","    <title>Galeria de Imagens</title>","    <style>","        img {","            width: 300px;","            margin: 10px;","            border-radius: 8px;","        }","    </style>","</head>","<body>","    <h1>Minha Galeria</h1>","    {% for imagem in imagens %}","        <img src=\"{{ imagem }}\" alt=\"Imagem da galeria\">","    {% endfor %}","</body>","</html>",""],"id":8},{"start":{"row":0,"column":0},"end":{"row":20,"column":0},"action":"insert","lines":["<!DOCTYPE html>","<html lang=\"pt-br\">","<head>","    <meta charset=\"UTF-8\">","    <title>Galeria de Imagens</title>","    <style>","        img {","            width: 300px;","            margin: 10px;","            border-radius: 8px;","        }","    </style>","</head>","<body>","    <h1>Minha Galeria</h1>","    {% for imagem in imagens %}","        <img src=\"{{ imagem }}\" alt=\"Imagem da galeria\">","    {% endfor %}","</body>","</html>",""]}],[{"start":{"row":0,"column":0},"end":{"row":20,"column":0},"action":"remove","lines":["<!DOCTYPE html>","<html lang=\"pt-br\">","<head>","    <meta charset=\"UTF-8\">","    <title>Galeria de Imagens</title>","    <style>","        img {","            width: 300px;","            margin: 10px;","            border-radius: 8px;","        }","    </style>","</head>","<body>","    <h1>Minha Galeria</h1>","    {% for imagem in imagens %}","        <img src=\"{{ imagem }}\" alt=\"Imagem da galeria\">","    {% endfor %}","</body>","</html>",""],"id":10},{"start":{"row":0,"column":0},"end":{"row":37,"column":0},"action":"insert","lines":["<!DOCTYPE html>","<html lang=\"en\">","<head>","    <meta charset=\"UTF-8\">","    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">","    <title>Galeria de Imagens</title>","</head>","<body>","    <h1>Galeria de Imagens</h1>","    <div id=\"gallery\">","        <!-- As imagens serão inseridas aqui dinamicamente -->","    </div>","","    <script>","        // Função para buscar as imagens","        async function fetchImages() {","            const response = await fetch('/get_images');","            const images = await response.json();","","            const gallery = document.getElementById('gallery');","","            // Adiciona cada imagem à galeria","            images.forEach(imageUrl => {","                const img = document.createElement('img');","                img.src = imageUrl;","                img.alt = 'Imagem do S3';","                img.style.width = '200px';  // Ajuste do tamanho da imagem","                img.style.margin = '10px';  // Espaçamento entre as imagens","                gallery.appendChild(img);","            });","        }","","        // Chama a função quando a página for carregada","        window.onload = fetchImages;","    </script>","</body>","</html>",""]}],[{"start":{"row":0,"column":0},"end":{"row":37,"column":0},"action":"remove","lines":["<!DOCTYPE html>","<html lang=\"en\">","<head>","    <meta charset=\"UTF-8\">","    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">","    <title>Galeria de Imagens</title>","</head>","<body>","    <h1>Galeria de Imagens</h1>","    <div id=\"gallery\">","        <!-- As imagens serão inseridas aqui dinamicamente -->","    </div>","","    <script>","        // Função para buscar as imagens","        async function fetchImages() {","            const response = await fetch('/get_images');","            const images = await response.json();","","            const gallery = document.getElementById('gallery');","","            // Adiciona cada imagem à galeria","            images.forEach(imageUrl => {","                const img = document.createElement('img');","                img.src = imageUrl;","                img.alt = 'Imagem do S3';","                img.style.width = '200px';  // Ajuste do tamanho da imagem","                img.style.margin = '10px';  // Espaçamento entre as imagens","                gallery.appendChild(img);","            });","        }","","        // Chama a função quando a página for carregada","        window.onload = fetchImages;","    </script>","</body>","</html>",""],"id":11},{"start":{"row":0,"column":0},"end":{"row":44,"column":0},"action":"insert","lines":["<!DOCTYPE html>","<html lang=\"en\">","<head>","    <meta charset=\"UTF-8\">","    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">","    <title>Galeria de Imagens</title>","</head>","<body>","    <h1>Galeria de Imagens</h1>","    <div id=\"gallery\">","        <!-- As imagens serão inseridas aqui dinamicamente -->","    </div>","","    <script>","        // Função para buscar as imagens","        async function fetchImages() {","            try {","                const response = await fetch('/get_images');","                if (!response.ok) {","                    throw new Error('Falha ao carregar imagens');","                }","                const images = await response.json();","","                const gallery = document.getElementById('gallery');","","                // Adiciona cada imagem à galeria","                images.forEach(imageUrl => {","                    const img = document.createElement('img');","                    img.src = imageUrl;","                    img.alt = 'Imagem do S3';","                    img.style.width = '200px';  // Ajuste do tamanho da imagem","                    img.style.margin = '10px';  // Espaçamento entre as imagens","                    gallery.appendChild(img);","                });","            } catch (error) {","                console.error('Erro ao buscar imagens:', error);","            }","        }","","        // Chama a função quando a página for carregada","        window.onload = fetchImages;","    </script>","</body>","</html>",""]}],[{"start":{"row":0,"column":0},"end":{"row":44,"column":0},"action":"remove","lines":["<!DOCTYPE html>","<html lang=\"en\">","<head>","    <meta charset=\"UTF-8\">","    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">","    <title>Galeria de Imagens</title>","</head>","<body>","    <h1>Galeria de Imagens</h1>","    <div id=\"gallery\">","        <!-- As imagens serão inseridas aqui dinamicamente -->","    </div>","","    <script>","        // Função para buscar as imagens","        async function fetchImages() {","            try {","                const response = await fetch('/get_images');","                if (!response.ok) {","                    throw new Error('Falha ao carregar imagens');","                }","                const images = await response.json();","","                const gallery = document.getElementById('gallery');","","                // Adiciona cada imagem à galeria","                images.forEach(imageUrl => {","                    const img = document.createElement('img');","                    img.src = imageUrl;","                    img.alt = 'Imagem do S3';","                    img.style.width = '200px';  // Ajuste do tamanho da imagem","                    img.style.margin = '10px';  // Espaçamento entre as imagens","                    gallery.appendChild(img);","                });","            } catch (error) {","                console.error('Erro ao buscar imagens:', error);","            }","        }","","        // Chama a função quando a página for carregada","        window.onload = fetchImages;","    </script>","</body>","</html>",""],"id":12},{"start":{"row":0,"column":0},"end":{"row":44,"column":0},"action":"insert","lines":["<!DOCTYPE html>","<html lang=\"en\">","<head>","    <meta charset=\"UTF-8\">","    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">","    <title>Galeria de Imagens</title>","</head>","<body>","    <h1>Galeria de Imagens</h1>","    <div id=\"gallery\">","        <!-- As imagens serão inseridas aqui dinamicamente -->","    </div>","","    <script>","        // Função para buscar as imagens","        async function fetchImages() {","            try {","                const response = await fetch('/get_images');","                const images = await response.json();","","                const gallery = document.getElementById('gallery');","","                // Limpar a galeria antes de adicionar as novas imagens","                gallery.innerHTML = '';","","                // Adiciona cada imagem à galeria","                images.forEach(imageUrl => {","                    const img = document.createElement('img');","                    img.src = imageUrl;  // A URL da imagem","                    img.alt = 'Imagem do S3';","                    img.style.width = '200px';  // Ajuste do tamanho da imagem","                    img.style.margin = '10px';  // Espaçamento entre as imagens","                    gallery.appendChild(img);","                });","            } catch (error) {","                console.error('Erro ao carregar as imagens:', error);","            }","        }","","        // Chama a função quando a página for carregada","        window.onload = fetchImages;","    </script>","</body>","</html>",""]}]]},"ace":{"folds":[],"scrolltop":86.40000470842664,"scrollleft":0,"selection":{"start":{"row":22,"column":65},"end":{"row":22,"column":65},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":13,"state":"js-start","mode":"ace/mode/html"}},"timestamp":1744505245757,"hash":"a67164ea1c0849ba17a45463216c0801fc18dc0e"}